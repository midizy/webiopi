<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content = "height = device-height, width = 420, user-scalable = yes" /> 
        <title>Toshi</title>
        <script type="text/javascript" src="/webiopi.js"></script>
        <script type="text/javascript">

	 DH11T = 0
	 DH11H = 0
        webiopi().ready(function() {
              var content, button;
              content = $("#content");

 		// create a button which call D11T 		
              button = webiopi().createButton("macro8", "D11 Temperature", callMacro_Temp);
		content.append(button); // append button to content div
		webiopi().setClass("macro8", "Temp"); //set color state

		// create a button which call D11H 		
              button = webiopi().createButton("macro9", "D11 Humidity", callMacro_Temp);
		content.append(button); // append button to content div
		webiopi().setClass("macro9", "Temp"); //set color state
      });

		function callMacro_SETPIO21(){
			webiopi().toggleValue(21);
			callMacro_GETPIO()}

		setInterval ("callMacro_GETPIO()", 5000);{
	}
		function callMacro_GETPIO(){
			var args = [0]
			webiopi().callMacro("GETPIO", args, macro_GETPIO_Callback);}
		function macro_GETPIO_Callback(macro, args, data){
			g0 = data.split(" ")[0];
			if (g0==1){
				webiopi().setClass("macro21", "ON");
				webiopi().setLabel("macro21", "GPIO 21 On");}
			else{
				webiopi().setClass("macro21", "OFF");
				webiopi().setLabel("macro21", "GPIO 21 Off");}

       }

	setInterval ("callMacro_Temp()", 5000);{
       }
	function callMacro_Temp(){
		var args = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
		webiopi().callMacro("Temp", args, macro_Temp_Callback);}
	function macro_Temp_Callback(macro, args, data){

		DH11T = data.split(" ")[8];
		myDiv8.innerHTML = data.split(" ")[8] +" °C";
		document.getElementById('meter8').setAttribute('value', DH11T);

		DH11H = data.split(" ")[9];
		myDiv9.innerHTML = data.split(" ")[9] +" %";
		document.getElementById('meter9').setAttribute('value', DH11H);

		webiopi().setLabel("macro8", "Temp 8 . " + DH11T +" °C");
		webiopi().setLabel("macro9", "Humidity . " + DH11H +" %");
	}

 </script>

 <style type="text/css">

 .Temp		{	background-color: Yellow;
                     display: block; 
			margin: 5px 5px 5px 5px; 
			width: 129px; 
			height: 40px;
			border-radius:10px;
			font-size: 8pt; 
			font-weight: 600;
			color: Black; 			} 
                
 
 
 </style>

   <title>Auto-adjust</title>
   <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />
   <style type="text/css">

      #g1, #g2, #g3, #g8, #g9 {
        width:150px; height:78px;
        display: inline-block;
        margin: 0em;
      }


  </style>
    
  

 <body>
   	<div id="g1"></div>
	<div id="g2"></div>
	<div id="g3"></div>
	<div id="g8"></div>
	<div id="g9"></div>	
				
      	<div id="content" align="left"></div>

	<br>
	<br>
	
 </body>


 <script type="text/javascript">
		var myDiv0 = document.getElementById("myDiv0"); 
       	var myDiv1 = document.getElementById("myDiv1"); 
		var myDiv2 = document.getElementById("myDiv2"); 
       	var myDiv3 = document.getElementById("myDiv3"); 
		var myDiv4 = document.getElementById("myDiv4"); 
       	var myDiv5 = document.getElementById("myDiv5"); 
		var myDiv6 = document.getElementById("myDiv6"); 
       	var myDiv7 = document.getElementById("myDiv7"); 
		var myDiv8 = document.getElementById("myDiv8"); 
       	var myDiv9 = document.getElementById("myDiv9"); 
 </script>

</html>